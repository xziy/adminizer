<select name="<%= key %>"
        id="form-<%= key %>" <%= field.config.required ? 'required' : '' %> <%= field.config.disabled ? 'disabled' : '' %> multiple>
</select>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        let choices = []
        <% if (field.config.records && field.config.records.length) { %>
        <% for (let opt of field.config.records) { %>
        choices.push({
            label: '<%- field.config.displayModifier && typeof field.config.displayModifier === 'function'
                    ? field.config.displayModifier(opt)
                    : (field.config.displayField ? opt[field.config.displayField] : opt[field.config.identifierField]); %>',
            value: '<%= opt[field.config.identifierField] %>',
            selected: false
        })
        <% } %>
        <% } else { %>
        <% } %>
        new Choices('#form-<%= key %>', {
            choices: choices,
            removeItemButton: true
        });
    })
</script>
