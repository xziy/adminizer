# Инструкции по работе с планом

## Структура папки .ai-notes

```
.ai-notes/
├── INSTRUCTIONS.md   # Этот файл - как работать с планом
├── PROGRESS.md       # Трекер прогресса реализации
├── PLAN.md           # Детальный план реализации фильтров
└── notes/            # Заметки по конкретным задачам (опционально)
```

## Как работать с планом

### 1. Начало работы над задачей

1. Открыть `PROGRESS.md` и найти следующую задачу со статусом `[ ]`
2. Изменить статус на `[~]` (в процессе)
3. Прочитать соответствующий раздел в `PLAN.md`
4. Создать ветку (рекомендуемый формат): `feature/filters-phase-X-task-Y`

### 2. Во время работы

- Обновлять `PROGRESS.md` по мере завершения подзадач
- Добавлять заметки в `notes/` если нужно сохранить важные решения
- При блокерах - документировать их в PROGRESS.md
- Над каждым смысловым блоком кода и текста добавлять короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздувать: повторяющаяся логика должна быть в хелперах/сервисах, новые хелперы не создавать без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть в едином сервисе фильтров и вызываться из контроллеров
- Контроллеры должны быть тонкими: принять запрос, вызвать сервис, вернуть ответ

### 3. Завершение задачи

1. Убедиться что все тесты проходят
2. Изменить статус в `PROGRESS.md` на `[x]`
3. Добавить дату завершения
4. Создать коммит/PR

## Статусы задач

| Символ | Значение |
|--------|----------|
| `[ ]` | Не начато |
| `[~]` | В процессе |
| `[x]` | Завершено |
| `[!]` | Заблокировано |
| `[-]` | Отменено/Отложено |

## Приоритеты

| Метка | Значение |
|-------|----------|
| `P0` | Критично - блокирует другие задачи |
| `P1` | Высокий - основной функционал |
| `P2` | Средний - важные улучшения |
| `P3` | Низкий - nice to have |

## Зависимости

В плане указаны зависимости между задачами. **Не начинайте задачу**, пока её зависимости не завершены.

## Работа с AI-ассистентом

При работе с Claude Code:
1. Сошлитесь на конкретную задачу из PLAN.md
2. AI прочитает контекст и поможет с реализацией
3. После завершения попросите обновить PROGRESS.md

## Ревью и тестирование

Каждая фаза должна включать:
- [ ] Unit тесты для новых функций
- [ ] Интеграционные тесты для API
- [ ] Проверка прав доступа
- [ ] Тестирование на разных ORM адаптерах (Sequelize, Waterline)
- [ ] Проверить новые изменения: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

## Документация

При завершении фазы обновить:
- README проекта (если меняется публичный API)
- JSDoc комментарии для новых классов/методов
- Примеры в `/fixture/` если добавлен новый функционал
