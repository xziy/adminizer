# РџР»Р°РЅ СЂРµР°Р»РёР·Р°С†РёРё СЃРёСЃС‚РµРјС‹ С„РёР»СЊС‚СЂРѕРІ РґР»СЏ Adminizer

**рџ“‚ Р”РµС‚Р°Р»СЊРЅС‹Рµ РїР»Р°РЅС‹ РїРѕ С„Р°Р·Р°Рј РЅР°С…РѕРґСЏС‚СЃСЏ РІ РїР°РїРєРµ:** `phases/`

> **пїЅ Р’РђР–РќРћ: Р’СЃРµ РїСЂРёРјРµСЂС‹ РєРѕРґР° вЂ” СЌС‚Рѕ РџРЎР•Р’Р”РћРљРћР”**
> 
> Р’РµСЃСЊ РєРѕРґ РІ СЌС‚РѕРј РїР»Р°РЅРµ Рё РІ С„Р°Р№Р»Р°С… `phases/` вЂ” СЌС‚Рѕ **РџРЎР•Р’Р”РћРљРћР” РІ СЃС‚РёР»Рµ JavaScript** РґР»СЏ РїРѕРЅРёРјР°РЅРёСЏ РєРѕРЅС†РµРїС†РёР№.
> **РќР• РєРѕРїРёСЂСѓР№С‚Рµ РєРѕРґ Р±СѓРєРІР°Р»СЊРЅРѕ!** РђРґР°РїС‚РёСЂСѓР№С‚Рµ РїРѕРґ СЂРµР°Р»СЊРЅСѓСЋ Р°СЂС…РёС‚РµРєС‚СѓСЂСѓ РїСЂРѕРµРєС‚Р°.
> 
> - РРЅС‚РµСЂС„РµР№СЃС‹ Рё С‚РёРїС‹ РјРѕРіСѓС‚ РѕС‚Р»РёС‡Р°С‚СЊСЃСЏ РѕС‚ СЂРµР°Р»СЊРЅС‹С…
> - РњРµС‚РѕРґС‹ РїРѕРєР°Р·Р°РЅС‹ РґР»СЏ РёР»Р»СЋСЃС‚СЂР°С†РёРё Р»РѕРіРёРєРё
> - Р РµР°Р»РёР·СѓР№С‚Рµ РєСЂРµР°С‚РёРІРЅРѕ, СЃР»РµРґСѓСЏ РїР°С‚С‚РµСЂРЅР°Рј СЃСѓС‰РµСЃС‚РІСѓСЋС‰РµРіРѕ РєРѕРґР°

> **пїЅрџ”ђ РљР РРўРР§РќРћ: DataAccessor Integration**
> 
> РњРѕРґРµР»СЊ `FilterAP` **РћР‘РЇР—РђРўР•Р›Р¬РќРћ** РґРѕР»Р¶РЅР° РІРєР»СЋС‡Р°С‚СЊ `userAccessRelation: 'owner'` РІ РєРѕРЅС„РёРіСѓСЂР°С†РёРё.
> Р’СЃРµ РѕРїРµСЂР°С†РёРё СЃ С„РёР»СЊС‚СЂР°РјРё **Р”РћР›Р–РќР«** РёРґС‚Рё С‡РµСЂРµР· `DataAccessor`, Р° РќР• С‡РµСЂРµР· РїСЂСЏРјС‹Рµ РІС‹Р·РѕРІС‹ ORM.
> 
> **Р‘Р•Р— Р­РўРћР“Рћ** СЃРёСЃС‚РµРјР° С„РёР»СЊС‚СЂРѕРІ Р±СѓРґРµС‚ СѓСЏР·РІРёРјР° - РїРѕР»СЊР·РѕРІР°С‚РµР»Рё СЃРјРѕРіСѓС‚ РІРёРґРµС‚СЊ С‡СѓР¶РёРµ РїСЂРёРІР°С‚РЅС‹Рµ С„РёР»СЊС‚СЂС‹!
> 
> рџ“– РЎРј. РґРѕРєСѓРјРµРЅС‚Р°С†РёСЋ: 
> - [DATA-ACCESSOR-INTEGRATION.md](DATA-ACCESSOR-INTEGRATION.md) - Р”РµС‚Р°Р»СЊРЅРѕРµ РѕРїРёСЃР°РЅРёРµ РёРЅС‚РµРіСЂР°С†РёРё
> - `docs/AccessRights/user-owned-records.md` - РћС„РёС†РёР°Р»СЊРЅР°СЏ РґРѕРєСѓРјРµРЅС‚Р°С†РёСЏ Adminizer

> **вљ пёЏ Р’РђР–РќРћ: РќРµ РѕРїРёСЃС‹РІР°С‚СЊ РѕС‚РјРµРЅС‘РЅРЅС‹Рµ Р·Р°РґР°С‡Рё**
> 
> Р’ РїР»Р°РЅРµ Рё РґРѕРєСѓРјРµРЅС‚Р°С†РёРё **РќР• РќРЈР–РќРћ** РґРµС‚Р°Р»СЊРЅРѕ РѕРїРёСЃС‹РІР°С‚СЊ С‚Рѕ, С‡С‚Рѕ РЅРµ Р±СѓРґРµС‚ СЂРµР°Р»РёР·РѕРІР°РЅРѕ.
> РЈРїРѕРјРёРЅР°РЅРёРµ РѕС‚РјРµРЅС‘РЅРЅС‹С… РјРѕРґРµР»РµР№, СЃРµСЂРІРёСЃРѕРІ Рё API **РІСЂРµРґРЅРѕ** - СЃРѕР·РґР°С‘С‚ РїСѓС‚Р°РЅРёС†Сѓ.
> 
> вњ… РџСЂР°РІРёР»СЊРЅРѕ: "Р¤Р°Р·Р° 8 РѕС‚РјРµРЅРµРЅР°. РСЃРїРѕР»СЊР·СѓР№С‚Рµ polling РЅР° РєР»РёРµРЅС‚Рµ."
> вќЊ РќРµРїСЂР°РІРёР»СЊРЅРѕ: РџРµСЂРµС‡РёСЃР»СЏС‚СЊ FilterSubscriptionAP, FilterChangeDetector Рё С‚.Рґ.

> **рџ”„ РЎРўР РђРўР•Р“РРЇ: Pull-only (С‚РѕР»СЊРєРѕ РїРѕ Р·Р°РїСЂРѕСЃСѓ)**
> 
> РЎРёСЃС‚РµРјР° С„РёР»СЊС‚СЂРѕРІ СЂР°Р±РѕС‚Р°РµС‚ **РўРћР›Р¬РљРћ** РїРѕ СЏРІРЅС‹Рј Р·Р°РїСЂРѕСЃР°Рј РѕС‚ РєР»РёРµРЅС‚Р° (pull-СЃС‚СЂР°С‚РµРіРёСЏ).
> 
> вќЊ **РќР•Рў:**
> - РђРІС‚РѕРјР°С‚РёС‡РµСЃРєРёС… РѕР±РЅРѕРІР»РµРЅРёР№ РїРѕ СЂР°СЃРїРёСЃР°РЅРёСЋ
> - Push-СѓРІРµРґРѕРјР»РµРЅРёР№ РѕР± РёР·РјРµРЅРµРЅРёСЏС…
> - РџРѕРґРїРёСЃРѕРє РЅР° РёР·РјРµРЅРµРЅРёСЏ С„РёР»СЊС‚СЂРѕРІ
> - РћР±СЂР°С‚РЅС‹С… РєРѕР»Р»Р±РµРєРѕРІ РѕС‚ Adminizer
> 
> вњ… **Р•РЎРўР¬:**
> - РЇРІРЅС‹Рµ Р·Р°РїСЂРѕСЃС‹ Рє API С„РёР»СЊС‚СЂРѕРІ
> - Р СѓС‡РЅРѕРµ РѕР±РЅРѕРІР»РµРЅРёРµ РґР°РЅРЅС‹С… РїРѕ РєРЅРѕРїРєРµ
> - Polling РїСЂРё РЅРµРѕР±С…РѕРґРёРјРѕСЃС‚Рё (РЅР° СЃС‚РѕСЂРѕРЅРµ РєР»РёРµРЅС‚Р°)

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## рџ—‚пёЏ РЎС‚СЂСѓРєС‚СѓСЂР° РґРѕРєСѓРјРµРЅС‚Р°С†РёРё

РљР°Р¶РґР°СЏ С„Р°Р·Р° РѕРїРёСЃР°РЅР° РІ РѕС‚РґРµР»СЊРЅРѕРј С„Р°Р№Р»Рµ:

- **[Р¤Р°Р·Р° 1: РњРѕРґРµР»Рё РґР°РЅРЅС‹С…](phases/01-data-model.md)** - FilterAP, FilterColumnAP
- **[Р¤Р°Р·Р° 2: Query Builder](phases/02-query-builder.md)** - Р’РёР·СѓР°Р»СЊРЅС‹Р№ РїРѕСЃС‚СЂРѕРёС‚РµР»СЊ WHERE
- **[Р¤Р°Р·Р° 3: CRUD С„РёР»СЊС‚СЂРѕРІ](phases/03-filter-crud.md)** - РЎРѕС…СЂР°РЅРµРЅРёРµ Рё СѓРїСЂР°РІР»РµРЅРёРµ
- **[Р¤Р°Р·Р° 4: РљР°СЃС‚РѕРјРёР·Р°С†РёСЏ РєРѕР»РѕРЅРѕРє](phases/04-column-customization.md)** - Drag-n-drop, РЅР°СЃС‚СЂРѕР№РєРё
- **[Р¤Р°Р·Р° 5: Inline СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ](phases/05-inline-editing.md)** - Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ РёР· СЃРїРёСЃРєР°
- **[Р¤Р°Р·Р° 6: Р­РєСЃРїРѕСЂС‚ РґР°РЅРЅС‹С…](phases/06-export-formats.md)** - JSON, CSV, Excel
- **[Р¤Р°Р·Р° 7: Public API](phases/07-public-api.md)** - Atom/XML, JSON РїРѕ РєР»СЋС‡Сѓ
- ~~**[Р¤Р°Р·Р° 8: РЈРІРµРґРѕРјР»РµРЅРёСЏ]** - РћРўРњР•РќР•РќРђ (С‚РѕР»СЊРєРѕ pull-СЃС‚СЂР°С‚РµРіРёСЏ)~~
- **[Р¤Р°Р·Р° 9: Р‘С‹СЃС‚СЂС‹Рµ СЃСЃС‹Р»РєРё](phases/09-quick-links.md)** - РќР°РІРёРіР°С†РёСЏ РїРѕ С„РёР»СЊС‚СЂР°Рј
- **[Р¤Р°Р·Р° 10: Dashboard Widget](phases/10-dashboard-widget.md)** - РЎС‡С‘С‚С‡РёРєРё РЅР° РґР°С€Р±РѕСЂРґРµ
- **[Р¤Р°Р·Р° 11: РџСЂРѕРіСЂР°РјРјРЅС‹Р№ API](phases/11-programmatic-api.md)** - FilterBuilder
- **[Р¤Р°Р·Р° 12: РљР°СЃС‚РѕРјРЅС‹Рµ СѓСЃР»РѕРІРёСЏ](phases/12-custom-conditions.md)** - JSON path, РіРµРѕРїРѕРёСЃРє
- **[Р¤Р°Р·Р° 13: РџСЂР°РІР° РґРѕСЃС‚СѓРїР°](phases/13-access-rights.md)** - Р Р°Р·РіСЂР°РЅРёС‡РµРЅРёРµ РґРѕСЃС‚СѓРїР°
- **[Фаза 14: Выбор полей (Field Selection)](phases/14-field-selection.md)** - Выбор полей/атрибутов для запросов

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## РћР±Р·РѕСЂ

РЎРёСЃС‚РµРјР° СЂР°СЃС€РёСЂРµРЅРЅС‹С… С„РёР»СЊС‚СЂРѕРІ РґР»СЏ Р°РґРјРёРЅ-РїР°РЅРµР»Рё Adminizer. РџРѕР·РІРѕР»СЏРµС‚ СЃРѕР·РґР°РІР°С‚СЊ, СЃРѕС…СЂР°РЅСЏС‚СЊ Рё РёСЃРїРѕР»СЊР·РѕРІР°С‚СЊ СЃР»РѕР¶РЅС‹Рµ С„РёР»СЊС‚СЂС‹ РґР»СЏ Р»СЋР±РѕР№ РјРѕРґРµР»Рё РґР°РЅРЅС‹С….

### РљР»СЋС‡РµРІС‹Рµ РІРѕР·РјРѕР¶РЅРѕСЃС‚Рё

1. Р’РёР·СѓР°Р»СЊРЅС‹Р№ РїРѕСЃС‚СЂРѕРёС‚РµР»СЊ WHERE-Р·Р°РїСЂРѕСЃРѕРІ
2. РЎРѕС…СЂР°РЅРµРЅРёРµ С„РёР»СЊС‚СЂРѕРІ СЃ РїСЂР°РІР°РјРё РґРѕСЃС‚СѓРїР°
3. Р­РєСЃРїРѕСЂС‚ РІ JSON, CSV, Excel, Atom/XML
4. РљР°СЃС‚РѕРјРёР·Р°С†РёСЏ РѕС‚РѕР±СЂР°Р¶Р°РµРјС‹С… РєРѕР»РѕРЅРѕРє
5. Inline-СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ Р·Р°РїРёСЃРµР№
6. Р’РёРґР¶РµС‚С‹ РґР»СЏ РґР°С€Р±РѕСЂРґР°
7. РџСЂРѕРіСЂР°РјРјРЅС‹Р№ API РґР»СЏ Р°РІС‚РѕРјР°С‚РёР·Р°С†РёРё
8. РљР°СЃС‚РѕРјРЅС‹Рµ РѕР±СЂР°Р±РѕС‚С‡РёРєРё СѓСЃР»РѕРІРёР№
9. РЎРёСЃС‚РµРјРЅС‹Рµ С„РёР»СЊС‚СЂС‹ (СЃРєСЂС‹С‚С‹Рµ РѕС‚ UI, РґРѕСЃС‚СѓРїРЅС‹ С‡РµСЂРµР· API/slug)

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## РђСЂС…РёС‚РµРєС‚СѓСЂР°

### Р”РёР°РіСЂР°РјРјР° РєРѕРјРїРѕРЅРµРЅС‚РѕРІ

```
в”Њв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ђ
в”‚                        Frontend (React)                         в”‚
в”њв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¤
в”‚  FilterBuilder  в”‚  ColumnSelector  в”‚  InlineEditor  в”‚  Widgets  в”‚
в””в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¬в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ґв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¬в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ґв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¬в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ґв”Ђв”Ђв”Ђв”Ђв”Ђв”¬в”Ђв”Ђв”Ђв”Ђв”Ђв”
         в”‚                 в”‚                 в”‚              в”‚
         в–ј                 в–ј                 в–ј              в–ј
в”Њв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ђ
в”‚                     API Controllers                              в”‚
в”њв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¤
в”‚  FilterController  в”‚  ExportController  в”‚  WidgetController      в”‚
в””в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¬в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ґв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¬в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ґв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¬в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”
         в”‚                     в”‚                     в”‚
         в–ј                     в–ј                     в–ј
в”Њв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ђ
в”‚                      Services Layer                              в”‚
в”њв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¤
в”‚  FilterService  в”‚  QueryBuilder  в”‚  ExportService               в”‚
в””в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¬в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ґв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¬в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ґв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¬в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”
         в”‚                в”‚                 в”‚              в”‚
         в–ј                в–ј                 в–ј              в–ј
в”Њв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”ђ
в”‚                      Data Layer                                  в”‚
в”њв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”¤
в”‚  FilterAP Model  в”‚  NodeTable (extended)  в”‚  ORM Adapters       в”‚
в””в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”
```

### РРЅС‚РµРіСЂР°С†РёСЏ СЃ СЃСѓС‰РµСЃС‚РІСѓСЋС‰РµР№ Р°СЂС…РёС‚РµРєС‚СѓСЂРѕР№

```
Adminizer
в”њв”Ђв”Ђ lib/
в”‚   в”њв”Ђв”Ђ filters/                    # РќРћР’РћР•
в”‚   в”‚   в”њв”Ђв”Ђ FilterHandler.ts        # Р“Р»Р°РІРЅС‹Р№ РјРµРЅРµРґР¶РµСЂ С„РёР»СЊС‚СЂРѕРІ
в”‚   в”‚   в”њв”Ђв”Ђ FilterService.ts        # Р‘РёР·РЅРµСЃ-Р»РѕРіРёРєР°
в”‚   в”‚   в”њв”Ђв”Ђ QueryBuilder.ts         # РџРѕСЃС‚СЂРѕРёС‚РµР»СЊ СѓСЃР»РѕРІРёР№
в”‚   в”‚   в”њв”Ђв”Ђ ExportService.ts        # Р­РєСЃРїРѕСЂС‚ РґР°РЅРЅС‹С…
в”‚   в”‚   в””в”Ђв”Ђ conditions/             # РљР°СЃС‚РѕРјРЅС‹Рµ СѓСЃР»РѕРІРёСЏ
в”‚   в”‚       в”њв”Ђв”Ђ ConditionRegistry.ts
в”‚   в”‚       в””в”Ђв”Ђ AbstractCondition.ts
в”‚   в”‚
в”‚   в”њв”Ђв”Ђ datatable/
в”‚   в”‚   в””в”Ђв”Ђ NodeTable.ts            # Р РђРЎРЁРР РРўР¬
в”‚   в”‚
в”‚   в””в”Ђв”Ђ widgets/
в”‚       в””в”Ђв”Ђ filterCountWidget.ts    # РќРћР’РћР•
в”‚
в”њв”Ђв”Ђ models/
в”‚   в”њв”Ђв”Ђ FilterAP.ts                 # РќРћР’РћР•
в”‚   в””в”Ђв”Ђ FilterColumnAP.ts           # РќРћР’РћР•
в”‚
в”њв”Ђв”Ђ controllers/
в”‚   в””в”Ђв”Ђ filters/                    # РќРћР’РћР•
в”‚       в”њв”Ђв”Ђ FilterController.ts
в”‚       в””в”Ђв”Ђ ExportController.ts
в”‚
в””в”Ђв”Ђ system/
    в””в”Ђв”Ђ bindFilters.ts              # РќРћР’РћР•
```

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## рџ“Њ Р”РµС‚Р°Р»СЊРЅР°СЏ СЂРµР°Р»РёР·Р°С†РёСЏ

**Р’СЃРµ РґРµС‚Р°Р»Рё СЂРµР°Р»РёР·Р°С†РёРё РЅР°С…РѕРґСЏС‚СЃСЏ РІ С„Р°Р№Р»Р°С… С„Р°Р·:** `phases/01-data-model.md`, `phases/02-query-builder.md` Рё С‚.Рґ.

РќРёР¶Рµ - С‚РѕР»СЊРєРѕ РєСЂР°С‚РєРёР№ РѕР±Р·РѕСЂ РєР»СЋС‡РµРІС‹С… РєРѕРЅС†РµРїС†РёР№.

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## Р¤Р°Р·Р° 1: РњРѕРґРµР»СЊ РґР°РЅРЅС‹С…

### РљР»СЋС‡РµРІС‹Рµ РєРѕРјРїРѕРЅРµРЅС‚С‹:

**FilterAP** - РѕСЃРЅРѕРІРЅР°СЏ РјРѕРґРµР»СЊ С„РёР»СЊС‚СЂР°:
- UUID РєР°Рє ID (string)
- conditions (JSON РјР°СЃСЃРёРІ)
- visibility: 'private' | 'public' | 'groups' | 'system'
- isSystemFilter - СЃРєСЂС‹С‚РёРµ РѕС‚ UI СЃРїРёСЃРєР°
- owner (BelongsTo UserAP) - РґР»СЏ DataAccessor
- userAccessRelation: 'owner' вљ пёЏ РљР РРўРР§РќРћ!

**FilterColumnAP** - РєР°СЃС‚РѕРјРёР·Р°С†РёСЏ РєРѕР»РѕРЅРѕРє:
- РЎРІСЏР·СЊ hasMany СЃ FilterAP
- РџРѕСЂСЏРґРѕРє, РІРёРґРёРјРѕСЃС‚СЊ, С€РёСЂРёРЅР°

рџ“– **Р”РµС‚Р°Р»Рё:** [phases/01-data-model.md](phases/01-data-model.md)

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## Р¤Р°Р·Р° 2: Query Builder

### РљР»СЋС‡РµРІС‹Рµ РєРѕРјРїРѕРЅРµРЅС‚С‹:

**ModernQueryBuilder** - Р·Р°РјРµРЅР°/СЂР°СЃС€РёСЂРµРЅРёРµ NodeTable:
- РћР±СЂР°Р±РѕС‚РєР° FilterCondition[] РІ WHERE РєР»Р°СѓР·С‹
- РџРѕРґРґРµСЂР¶РєР° РІР»РѕР¶РµРЅРЅС‹С… AND/OR/NOT РіСЂСѓРїРї
- РљР°СЃС‚РѕРјРЅС‹Рµ РѕРїРµСЂР°С‚РѕСЂС‹
- Р‘РµР·РѕРїР°СЃРЅРѕСЃС‚СЊ (SQL injection Р·Р°С‰РёС‚Р°)

**CustomFieldHandler** - РѕР±СЂР°Р±РѕС‚РєР° РЅРµСЃС‚Р°РЅРґР°СЂС‚РЅС‹С… РїРѕР»РµР№:
- JSON path Р·Р°РїСЂРѕСЃС‹
- РЎРІСЏР·Рё (relations)
- Р’РёСЂС‚СѓР°Р»СЊРЅС‹Рµ РїРѕР»СЏ

рџ“– **Р”РµС‚Р°Р»Рё:** [phases/02-query-builder.md](phases/02-query-builder.md)

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## Р¤Р°Р·Р° 3: CRUD С„РёР»СЊС‚СЂРѕРІ

### РљР»СЋС‡РµРІС‹Рµ РєРѕРјРїРѕРЅРµРЅС‚С‹:

**FilterRepository** - CRUD С‡РµСЂРµР· DataAccessor
**ConditionValidator** - РІР°Р»РёРґР°С†РёСЏ СѓСЃР»РѕРІРёР№
**FilterAccessService** - РїСЂРѕРІРµСЂРєР° РїСЂР°РІ
**Filter Controllers** - REST API (С„СѓРЅРєС†РёРё, РЅРµ РєР»Р°СЃСЃС‹!)

**Endpoints:**
- GET /adminizer/filters - СЃРїРёСЃРѕРє
- POST /adminizer/filters/preview - РїСЂРёРјРµРЅРёС‚СЊ Р‘Р•Р— СЃРѕС…СЂР°РЅРµРЅРёСЏ
- POST /adminizer/filters - СЃРѕР·РґР°С‚СЊ
- GET /adminizer/filter/:id - РїСЂСЏРјР°СЏ СЃСЃС‹Р»РєР°

рџ“– **Р”РµС‚Р°Р»Рё:** [phases/03-filter-crud.md](phases/03-filter-crud.md)

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## Р¤Р°Р·С‹ 4-14

РћСЃС‚Р°Р»СЊРЅС‹Рµ С„Р°Р·С‹ РѕРїРёСЃР°РЅС‹ РІ СЃРѕРѕС‚РІРµС‚СЃС‚РІСѓСЋС‰РёС… С„Р°Р№Р»Р°С…:

- **Р¤Р°Р·Р° 4:** РљР°СЃС‚РѕРјРёР·Р°С†РёСЏ РєРѕР»РѕРЅРѕРє в†’ [phases/04-column-customization.md](phases/04-column-customization.md)
- **Р¤Р°Р·Р° 5:** Inline СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ в†’ [phases/05-inline-editing.md](phases/05-inline-editing.md)
- **Р¤Р°Р·Р° 6:** Р­РєСЃРїРѕСЂС‚ РґР°РЅРЅС‹С… в†’ [phases/06-export-formats.md](phases/06-export-formats.md)
- **Р¤Р°Р·Р° 7:** Public API в†’ [phases/07-public-api.md](phases/07-public-api.md)
- **Р¤Р°Р·Р° 9:** Р‘С‹СЃС‚СЂС‹Рµ СЃСЃС‹Р»РєРё в†’ [phases/09-quick-links.md](phases/09-quick-links.md)
- **Р¤Р°Р·Р° 10:** Dashboard Widget в†’ [phases/10-dashboard-widget.md](phases/10-dashboard-widget.md)
- **Р¤Р°Р·Р° 11:** РџСЂРѕРіСЂР°РјРјРЅС‹Р№ API в†’ [phases/11-programmatic-api.md](phases/11-programmatic-api.md)
- **Р¤Р°Р·Р° 12:** РљР°СЃС‚РѕРјРЅС‹Рµ СѓСЃР»РѕРІРёСЏ в†’ [phases/12-custom-conditions.md](phases/12-custom-conditions.md)
- **Р¤Р°Р·Р° 13:** РџСЂР°РІР° РґРѕСЃС‚СѓРїР° в†’ [phases/13-access-rights.md](phases/13-access-rights.md)
- **Фаза 14:** Выбор полей (Field Selection) → [phases/14-field-selection.md](phases/14-field-selection.md)

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## Р—Р°РІРёСЃРёРјРѕСЃС‚Рё npm

```json
{
  "dependencies": {
    "csv-stringify": "^6.4.0",
    "exceljs": "^4.4.0",
    "xmlbuilder2": "^3.1.1",
    "uuid": "^9.0.0"
  }
}
```

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## РўРµСЃС‚РёСЂРѕРІР°РЅРёРµ

рџ“– **РџРѕР»РЅР°СЏ СЃС‚СЂР°С‚РµРіРёСЏ С‚РµСЃС‚РёСЂРѕРІР°РЅРёСЏ:** [TESTING_STRATEGY.md](TESTING_STRATEGY.md)

### РљСЂР°С‚РєРёР№ РѕР±Р·РѕСЂ

**Unit С‚РµСЃС‚С‹** (80%+ coverage):
- РњРѕРґРµР»Рё (FilterAP, FilterColumnAP)
- QueryBuilder
- FilterService
- Validators
- Access control

**Integration С‚РµСЃС‚С‹**:
- CRUD С‡РµСЂРµР· API
- DataAccessor РёРЅС‚РµРіСЂР°С†РёСЏ
- Permissions
- Rate limiting

**E2E С‚РµСЃС‚С‹** (Playwright):
- РЎРѕР·РґР°РЅРёРµ С„РёР»СЊС‚СЂР° С‡РµСЂРµР· UI
- РџСЂРёРјРµРЅРµРЅРёРµ С„РёР»СЊС‚СЂР° Рє СЃРїРёСЃРєСѓ
- Р­РєСЃРїРѕСЂС‚ РґР°РЅРЅС‹С…
- РЈРїСЂР°РІР»РµРЅРёРµ РїСЂР°РІР°РјРё

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## РњРёРіСЂР°С†РёСЏ Рё РѕР±СЂР°С‚РЅР°СЏ СЃРѕРІРјРµСЃС‚РёРјРѕСЃС‚СЊ

1. Р¤РёР»СЊС‚СЂС‹ - СЌС‚Рѕ РЅРѕРІС‹Р№ С„СѓРЅРєС†РёРѕРЅР°Р», РЅРµ РІР»РёСЏРµС‚ РЅР° СЃСѓС‰РµСЃС‚РІСѓСЋС‰РёР№ РєРѕРґ
2. Р Р°СЃС€РёСЂРµРЅРёРµ NodeTable СЃРѕС…СЂР°РЅСЏРµС‚ РѕР±СЂР°С‚РЅСѓСЋ СЃРѕРІРјРµСЃС‚РёРјРѕСЃС‚СЊ
3. Р’СЃРµ РЅРѕРІС‹Рµ РјРѕРґРµР»Рё РёРјРµСЋС‚ СЃСѓС„С„РёРєСЃ `AP` СЃРѕРіР»Р°СЃРЅРѕ РєРѕРЅРІРµРЅС†РёРё
4. API endpoints РїРѕРґ РЅРѕРІС‹Рј РїСЂРµС„РёРєСЃРѕРј `/filters`

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## РћС†РµРЅРєР° СЃР»РѕР¶РЅРѕСЃС‚Рё РїРѕ С„Р°Р·Р°Рј

| Р¤Р°Р·Р° | РЎР»РѕР¶РЅРѕСЃС‚СЊ | РћРїРёСЃР°РЅРёРµ |
|------|-----------|----------|
| 1 | РЎСЂРµРґРЅСЏСЏ | РњРѕРґРµР»Рё Рё РјРёРіСЂР°С†РёРё |
| 2 | Р’С‹СЃРѕРєР°СЏ | QueryBuilder СЃ РІР»РѕР¶РµРЅРЅС‹РјРё СѓСЃР»РѕРІРёСЏРјРё |
| 3 | РЎСЂРµРґРЅСЏСЏ | РЎС‚Р°РЅРґР°СЂС‚РЅС‹Р№ CRUD |
| 4 | РќРёР·РєР°СЏ | UI drag-n-drop |
| 5 | РЎСЂРµРґРЅСЏСЏ | Inline СЂРµРґР°РєС‚РѕСЂС‹ |
| 6 | РЎСЂРµРґРЅСЏСЏ | Р­РєСЃРїРѕСЂС‚ СЃ Р±РёР±Р»РёРѕС‚РµРєР°РјРё |
| 7 | РќРёР·РєР°СЏ | REST API endpoints |
| ~~8~~ | ~~Р’С‹СЃРѕРєР°СЏ~~ | ~~РРЅС‚РµРіСЂР°С†РёСЏ СЃ СѓРІРµРґРѕРјР»РµРЅРёСЏРјРё~~ (РћРўРњР•РќР•РќРђ) |
| 9 | РќРёР·РєР°СЏ | UI РєРѕРјРїРѕРЅРµРЅС‚С‹ |
| 10 | РќРёР·РєР°СЏ | Р Р°СЃС€РёСЂРµРЅРёРµ РІРёРґР¶РµС‚РѕРІ |
| 11 | РЎСЂРµРґРЅСЏСЏ | Fluent API |
| 12 | Р’С‹СЃРѕРєР°СЏ | РЎРёСЃС‚РµРјР° СЂР°СЃС€РёСЂРµРЅРёР№ |
| 13 | РЎСЂРµРґРЅСЏСЏ | РџСЂР°РІР° РґРѕСЃС‚СѓРїР° |
| 14 | Средняя | Выбор полей (select/attributes) |

---

## ✅ Общие принципы реализации

- Над каждым смысловым блоком кода и текста должен быть короткий комментарий (1-2 строки): что делает блок и зачем он нужен
- Код не раздуваем: повторяющаяся логика выносится в хелперы/сервисы, новые хелперы не плодим без необходимости
- Вся логика фильтров (парсинг, нормализация, сбор условий, сортировка и т.д.) должна быть объединена в единый сервис фильтров и использоваться из контроллеров
- Контроллеры должны оставаться тонкими: принять запрос → вызвать сервис → вернуть ответ
- При ревью новых изменений проверять: логика фильтров не дублируется, контроллеры не раздулись, используется общий сервис фильтров

---
## РњРµС‚Р°

**РЎРѕР·РґР°РЅРѕ:** 2024
**РЎС‚Р°С‚СѓСЃ:** рџ“‹ Planning
**РџСЂРёРѕСЂРёС‚РµС‚:** High


